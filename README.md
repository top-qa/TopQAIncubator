# TopQAIncubator

> 一些在构思中的实践，一时可能来不及做，先把灵感和实现思路记录下来，以便后续进行开发

> 如果你对下面的内容感兴趣，可以联系我一起写码:565506019@qq.com

##### 功能描述
在Jmeter多集群测试的场景下，自动到master中获取对应的文件，可供选择的功能

是否进行slave分发：
- 否
- 每个slave使用相同文件（默认）
- 每个slave使用master均分的文件

##### 实现思路
- 对csv数据文件设置器进行二次开发
- 增加选项是否进行数据分发
 - 这里以最复杂的场景举例（均分场景）
 - 当master启动脚本时，由于配置原件的执行优先级，会优先加载
 - 获取slave的机器：读取jmeter.property的remote_host文件，读取slave机器的数量
 - 在master侧对csv文件进行数据等分，等分数量为slave机器的数量，文件名称为slave机器的ip+文件名称+.csv
 - 随着脚本的执行，启动一个httpserver端口，httpserver的端口从配置文件进行注入，达到可以通过http访问文件并下载的目的
 - 当slave执行脚本时，判断csv配置文件是否使用了数据分发，如果使用了，则获取本机ip(这里可能会存在坑，因为可能拿到好几个ip，获取文件的地方可以走程序处理)，并获取master的ip，端口从配置文件进行读取，进行文件的下载，下载到的路径同csv路径
 - 下载完成后正常执行测试
 - 当master收到所有的slave测试完毕后，httpserver也随着测试结束


##### 维护方式
- 由于jmeter插件的可插拔性，希望通过插件来实现
- 关注官网jmeter csv data set的更新情况，随时进行更新处理
